{"version":3,"file":"jseeder.esm.js","sources":["../src/core/services/i18n.ts","../src/core/services/pnrg.ts","../src/core/Generator.ts","../src/core/interfaces/collection.ts","../src/core/utils/objectMap.ts","../src/core/Structure.ts","../src/core/Collection.ts","../src/generators/Dataset.ts","../src/generators/String.ts","../src/generators/Uuid.ts","../src/index.ts"],"sourcesContent":["import {IDictionary, IDictionaryHash} from '../interfaces/index';\n\nexport class I18n {\n    protected locale: string;\n    protected dictionaries: IDictionaryHash;\n\n    constructor(locale?: string, dictionaries?: IDictionaryHash) {\n        this.locale = locale;\n        this.dictionaries = dictionaries;\n    }\n\n    public getActiveDictionary(): IDictionary {\n        return this.dictionaries[this.locale];\n    }\n\n    public setLocale(locale: string) {\n        this.locale = locale;\n        return this;\n    }\n\n    public setDictionaries(dictionaries: IDictionaryHash) {\n        this.dictionaries = dictionaries;\n        return this;\n    }\n}\n\nexport const i18n = new I18n();\n","export class Pnrg {\n    protected seed: number;\n\n    constructor() {\n        this.seed = Math.floor((Math.random() * 0xF4240) + 1);\n    }\n\n    public random(): number {\n        return Math.abs(Math.sin(++this.seed * (this.seed + 0xFF))); // very stupid algorithm\n    }\n\n    public setSeed(seed: number): this {\n        this.seed = seed;\n        return this;\n    }\n}\n\nexport const pnrg = new Pnrg();\n","import {IDictionary} from './interfaces/index';\nimport {I18n, i18n} from './services/i18n';\nimport {Pnrg, pnrg} from './services/pnrg';\nimport {MaskMapperType} from './types/index';\n\nexport default abstract class Generator {\n    protected readonly hexNumberCharset: string = '0123456789ABCDEF';\n    protected readonly decNumberCharset: string = '0123456789';\n\n    protected i18n: I18n;\n    protected pnrg: Pnrg;\n\n    constructor() {\n        this.i18n = i18n;\n        this.pnrg = pnrg;\n    }\n\n    public abstract generate(): any;\n\n    public get() {\n        return this.generate();\n    }\n\n    protected getDictionary(): IDictionary {\n        return this.i18n.getActiveDictionary();\n    }\n\n    protected random(): number {\n        return this.pnrg.random();\n    }\n\n    protected makeMaskMapper(mask: string, replaceableChar: string = '#'): MaskMapperType {\n        return callback => mask.split('')\n            .map(character => character === replaceableChar ? callback(character) : character)\n            .join('');\n    }\n\n    protected getRandomFromArray<T>(array: T[]): T {\n        return array[Math.floor(this.random() * array.length)];\n    }\n}\n","export interface ICollection {\n    setObject(object: object): this;\n\n    setSize(value: number): this;\n\n    setSourceArray(array: any[]): this;\n\n    process(): any[];\n}\n\nexport function instanceOfICollection(object: any) {\n    return [\n        'setObject',\n        'setSize',\n        'setSourceArray',\n        'process'\n    ].every(methodName => methodName in object);\n}\n","export default (object, callback) => Object.keys(object).reduce((result, propName, index) => ({\n    ...result,\n    [propName]: callback(object[propName], propName, index, result)\n}), {});\n","import Generator from './Generator';\nimport {instanceOfICollection} from './interfaces/collection';\nimport objectMap from './utils/objectMap';\n\nexport default class Structure {\n    protected object: object;\n\n    constructor(object: object = {}) {\n        this.object = object;\n    }\n\n    public setObject(value): this {\n        this.object = value;\n        return this;\n    }\n\n    public process(sourceObject: object = {}): object {\n        return {\n            ...sourceObject,\n            ...this.processObject(this.object)\n        };\n    }\n\n    protected processObject(object: object): object {\n        return objectMap(object, value => this.processProperty(value));\n    }\n\n    protected processProperty(value: any): any {\n        let processedValue;\n\n        if (value instanceof Generator) {\n            processedValue = value.generate();\n        } else if (instanceOfICollection(value)) { // recursion to child collection\n            processedValue = value.process();\n        } else if (value instanceof Object) {\n            processedValue = this.process(value);\n        } else { // plain value\n            processedValue = value;\n        }\n\n        return processedValue;\n    }\n}\n","import Structure from './Structure';\n\nexport default class Collection {\n    public static make(object: object) {\n        return new this(object);\n    }\n\n    protected structure: object;\n    protected sourceArray: any[];\n    protected size: number;\n\n    constructor(object: object) {\n        this.structure = new Structure(object);\n    }\n\n    public setObject(object: object): this {\n        this.structure = object;\n        return this;\n    }\n\n    public setSize(value: number): this {\n        this.size = value;\n        return this;\n    }\n\n    public setSourceArray(array: any[]): this {\n        this.sourceArray = array;\n        return this;\n    }\n\n    public process(): any[] {\n        return this.getArrayForFill().map(sourceObject => {\n            return new Structure(this.structure).process(sourceObject);\n        });\n    }\n\n    protected getArrayForFill(): any[] {\n        let sourceArray: any[];\n\n        if (this.sourceArray != null && this.size != null) {\n            sourceArray = this.normalizeSourceArrayByCount(this.sourceArray, this.size);\n        } else if (this.sourceArray != null) {\n            sourceArray = [...this.sourceArray];\n        } else {\n            sourceArray = (new Array(this.size || 0)).fill({});\n        }\n\n        return sourceArray;\n    }\n\n    protected normalizeSourceArrayByCount(array: any[], count: number): any[] {\n        return count > array.length ?\n            [...array, new Array(count - array.length).fill({})]\n            : array.filter((item, index) => index < count);\n    }\n}\n","import Generator from '../core/Generator';\nimport {IDatasetGeneratorParams} from '../core/interfaces/index';\n\nexport default class DatasetGenerator extends Generator {\n    public static make(params?: IDatasetGeneratorParams) {\n        return new this(params);\n    }\n\n    public static get(params?: IDatasetGeneratorParams) {\n        return DatasetGenerator.make(params).get();\n    }\n\n    protected data: any[];\n\n    constructor({data = []}: IDatasetGeneratorParams) {\n        super();\n        this.data = data;\n    }\n\n    public generate(): any {\n        return this.getRandomFromArray(this.data);\n    }\n\n    public setData(data: any[]): this {\n        this.data = data;\n        return this;\n    }\n}\n","import Generator from '../core/Generator';\nimport {IStringGeneratorParams} from '../core/interfaces/index';\n\nexport default class StringGenerator extends Generator {\n    public static make(params?: IStringGeneratorParams) {\n        return new this(params);\n    }\n\n    public static get(params?: IStringGeneratorParams) {\n        return this.make(params).get();\n    }\n\n    protected size: number;\n    protected customCharset: string;\n\n    constructor({size = 8, customCharset}: IStringGeneratorParams) {\n        super();\n        this.size = size;\n        this.customCharset = customCharset;\n    }\n\n    public generate(): string {\n        const charset: string = this.getCharset();\n        let value: string = '';\n\n        for (let i = 0; i < this.size; i++) {\n            value += this.getRandomFromArray(charset.split(''));\n        }\n\n        return value;\n    }\n\n    public setSize(size: number): this {\n        this.size = size;\n        return this;\n    }\n\n    public setCustomCharset(charset: string): this {\n        this.customCharset = charset;\n        return this;\n    }\n\n    protected getCharset(): string {\n        return this.customCharset || (this.getDictionary().alphabet + this.decNumberCharset);\n    }\n}\n","import Generator from '../core/Generator';\n\nexport default class StringGenerator extends Generator {\n    public static make() {\n        return new this();\n    }\n\n    public static get() {\n        return this.make().get();\n    }\n\n    protected readonly mask: string = '########-####-####-####-###########';\n\n    public generate(): string {\n        return this.makeMaskMapper(this.mask)(\n            () => this.getRandomFromArray(this.hexNumberCharset.split('')).toLowerCase()\n        );\n    }\n}\n","import Collection from './core/Collection';\nimport Generator from './core/Generator';\nimport {i18n} from './core/services/i18n';\nimport {pnrg} from './core/services/pnrg';\nimport Structure from './core/Structure';\nimport Dataset from './generators/Dataset';\nimport String from './generators/String';\nimport Uuid from './generators/Uuid';\n\nconst Jseeder = {\n    Collection,\n    Generator,\n    Structure,\n    generators: {\n        Dataset,\n        String,\n        Uuid\n    },\n    i18n,\n    pnrg\n};\n\nexport default Jseeder;\n"],"names":["tslib_1.__extends"],"mappings":"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"}